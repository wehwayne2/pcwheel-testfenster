(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function w(){return window.innerWidth<=768}const m={};let L=1e3,g=!0;const u=document.getElementById("firstpage"),f=document.getElementById("secondpage");function b(){const s=`mailto:xianyao.wei.de@gmail.com?subject=${encodeURIComponent("Hello from the Portfolio Website")}&body=${encodeURIComponent(" ")}`;window.location.href=s}function C(){g?(u.classList.remove("fade-in"),u.classList.add("fade-out"),setTimeout(()=>u.classList.add("hidden"),500),f.classList.remove("fade-out","hidden"),f.classList.add("fade-in")):(u.classList.remove("hidden","fade-out"),u.classList.add("fade-in"),f.classList.remove("fade-in"),f.classList.add("fade-out"),setTimeout(()=>f.classList.add("hidden"),500)),g=!g}window.addEventListener("load",()=>{u.classList.add("fade-in"),f.classList.add("hidden")});function q(){[u,f].forEach(t=>{t.classList.remove("fade-in"),t.classList.add("fade-out"),setTimeout(()=>t.classList.add("hidden"),500)}),Object.values(m).forEach(t=>{t.style.display="none"}),g=!1;const e=document.getElementById("warningwindow-mobile");e&&(e.style.display="flex")}function B(e,...t){CABLES.logErrorConsole(`[${e}]`,...t)}function I(e){}function z(e){}document.addEventListener("CABLES.jsLoaded",()=>{CABLES.patch=new CABLES.Patch({patch:CABLES.exportedPatch,prefixAssetPath:"",assetPath:"assets/",jsPath:"js/",glCanvasId:"glcanvas",glCanvasResizeToWindow:!0,onError:B,onPatchLoaded:I,onFinishedLoading:z,canvas:{alpha:!0,premultipliedAlpha:!0},outSidefunctionWork:$,outSidefunctionMail:b,outSidefunctionAbout:M,outSidefunctionStart:C,outSidefunctionPC:q})});function x(){const e=document.getElementById("glcanvas");e.width=window.innerWidth,e.height=window.innerHeight}window.addEventListener("resize",x);x();function W(e){const t=document.createElement("div");t.className="xpWindow",t.style.zIndex=++L;const n=document.createElement("div");n.className="titlebar";const i=document.querySelector("#titlebar-template").content.cloneNode(!0);i.querySelector(".title").textContent=e===1?"WORK":e===2?"ABOUT":`Window ${e}`,n.appendChild(i),t.appendChild(n);const o=document.createElement("div");o.className="content";const d=document.querySelector(`#window${e}-template`);d&&(o.innerHTML=d.innerHTML),e===1&&T(o),t.appendChild(o);const l=document.createElement("div");l.className="resize-handle br",t.appendChild(l),document.body.appendChild(t);const r={1:{width:800,height:500,left:100,top:100},2:{width:500,height:350,left:700,top:200}}[e]||{width:600,height:400,left:300,top:200},{width:h,height:c,left:a,top:y}=r;t.style.width=`${h}px`,t.style.height=`${c}px`,t.style.left=`${a}px`,t.style.top=`${y}px`,w()||P(t,n),w()||k(t,l);const p=()=>A(e);return n.querySelector(".closeBtn").onclick=()=>{t.style.display="none",p()},n.querySelector(".minimizeBtn").onclick=()=>{t.style.display="none",p()},n.querySelector(".maximizeBtn").onclick=()=>t.classList.toggle("maximized"),t}function S(e){m[e]||(m[e]=W(e));const t=m[e],n=t.style.display!=="none"&&t.style.display!=="";if(t.style.display=n?"none":"flex",!n){t.style.zIndex=++L;const s=t.querySelector(".content");e===1&&s&&(s.querySelector("#ytVideo").src="",s.querySelector("#videoView").style.display="none",s.querySelector("#imageList").style.display="flex"),w()?t.classList.add("maximized"):t.classList.remove("maximized"),s==null||s.scrollTo(0,0)}}function $(){S(1),console.log("myFunctionWork triggered")}function M(){S(2),console.log("myFunctionAbout triggered")}function T(e){const t=e.querySelector("#imageList"),n=e.querySelector("#videoView"),s=e.querySelector("#ytVideo"),i=e.querySelector("#videoText"),o=e.querySelector("#backBtn"),d=e.querySelector("#nextBtn"),l=Array.from(t.querySelectorAll("img"));let r=-1;function h(c){const a=l[c],y=a.dataset.video,p=a.dataset.descriptionTemplate,v=p?document.getElementById(p):null,E=v?v.innerHTML:a.alt||"";s.src=y?`https://www.youtube.com/embed/${y}?rel=0&modestbranding=1`:"",s.style.display=y?"block":"none",i.innerHTML=E,t.style.display="none",n.style.display="flex",r=c,history.pushState({page:`video-${c}`},"",`#work/video${c+1}`)}l.forEach((c,a)=>c.addEventListener("click",()=>h(a))),o.addEventListener("click",()=>{s.src="",n.style.display="none",t.style.display="flex",r=-1,history.pushState({page:"work-root"},"","#work")}),d.addEventListener("click",()=>{const c=(r+1)%l.length;h(c)})}function A(e){if(e!==1)return;const t=m[e],n=t==null?void 0:t.querySelector(".content");n&&(n.querySelector("#ytVideo").src="",n.querySelector("#videoView").style.display="none",n.querySelector("#imageList").style.display="flex")}function P(e,t){let n=!1,s=0,i=0;t.addEventListener("mousedown",o=>{if(o.target.closest(".controls"))return;n=!0;const d=e.getBoundingClientRect();s=o.clientX-d.left,i=o.clientY-d.top,e.style.zIndex=++L}),window.addEventListener("mousemove",o=>{if(!n)return;const d=Math.max(0,Math.min(o.clientX-s,window.innerWidth-e.offsetWidth)),l=Math.max(0,Math.min(o.clientY-i,window.innerHeight-e.offsetHeight));e.style.left=`${d}px`,e.style.top=`${l}px`}),window.addEventListener("mouseup",()=>n=!1)}function k(e,t){let n=!1,s,i,o,d;t.addEventListener("mousedown",l=>{l.preventDefault(),n=!0;const r=e.getBoundingClientRect();s=l.clientX,i=l.clientY,o=r.width,d=r.height,e.style.zIndex=++L}),window.addEventListener("mousemove",l=>{n&&(e.style.width=`${Math.max(300,o+(l.clientX-s))}px`,e.style.height=`${Math.max(200,d+(l.clientY-i))}px`)}),window.addEventListener("mouseup",()=>n=!1)}window.addEventListener("resize",()=>{Object.values(m).forEach(e=>{w()&&e.classList.add("maximized")})});
